C*******************************************************************************
C
C                      IWFM STREAM CONFIGURATION FILE
C
C                         Version {{ version | default('4.0') }}
C                         Generated by pyiwfm
C                         {{ generation_time }}
C
C*******************************************************************************
C
C   NREACH  ; Number of stream reaches
C   NRTB    ; Number of rating tables (v4.0 only)
C
C-----------------------------------------------------------------------------
{{ n_reaches | default(0) }}                                     / NREACH
{{ n_rating_tables | default(0) }}                                     / NRTB
{% if n_reaches > 0 %}
C
C   For each reach, define its properties
C
{% for reach in reaches %}
C   Reach {{ reach.id }}
{{ reach.id }}                                             / ID
{{ reach.upstream_node }}                                  / UPNODE
{{ reach.downstream_node }}                                / DNNODE
{{ reach.outflow_reach | default(0) }}                     / OUTREACH
{% for inflow in reach.inflows %}
{{ inflow }}                                               / INFLOW
{% endfor %}
{% endfor %}
{% endif %}
C
C   NSTRMNODE  ; Number of stream nodes
C
C-----------------------------------------------------------------------------
{{ n_stream_nodes | default(0) }}                                / NSTRMNODE
{% if n_stream_nodes > 0 %}
C
C   ID      GWN   REACH        STAGE
C-----------------------------------------------------------------------------
{% endif %}
{% if rating_tables %}
C*******************************************************************************
C                       Rating Tables
C
C-----------------------------------------------------------------------------
{% for rt in rating_tables %}
C   Rating table {{ rt.id }}: {{ rt.n_points }} points
{% for pt in rt.points %}
    {{ pt.stage | fortran_float(12, 4) }}  {{ pt.flow | fortran_float(12, 4) }}
{% endfor %}
{% endfor %}
{% endif %}
C*******************************************************************************
C                       Partial Interaction
C
C-----------------------------------------------------------------------------
    {{ partial_interaction | default(0) }}                                     / IPARTL
