#{{ version }}
C***  DO NOT DELETE ABOVE LINE ***
C
C*******************************************************************************
C
C                  INTEGRATED WATER FLOW MODEL (IWFM)
C
C*******************************************************************************
C
C                UNSATURATED ZONE PARAMETERS DATA FILE
C                     Unsaturated Zone Component
C                       *** Version {{ version }} ***
C
C             Generated by pyiwfm
C             {{ generation_time }}
C
C*******************************************************************************
C                       Number of Unsaturated Zone Layers
C
C----------------------------------------------------------------------------------------
     {{ n_layers }}                                / NUnsatLayers
{% if n_layers > 0 %}
C*******************************************************************************
C                       Solver Parameters
C
C----------------------------------------------------------------------------------------
C   VALUE                       DESCRIPTION
C----------------------------------------------------------------------------------------
     {{ solver_tolerance }}                   / CONVERGENCE
     {{ max_iterations }}                     / MAXITER
C*******************************************************************************
C                       Output Data File Names
C
C----------------------------------------------------------------------------------------
          {{ budget_file | pad_right(40) }} / UZBUDFL
          {{ zbudget_file | pad_right(40) }} / UZZBUDFL
          {{ final_results_file | pad_right(40) }} / FNUZFL
C*******************************************************************************
C                       Parametric Grids
C
C----------------------------------------------------------------------------------------
     {{ n_parametric_grids }}                 / NGROUP
C*******************************************************************************
C                       Unsaturated Zone Parameters
C
C----------------------------------------------------------------------------------------
C   VALUE                       DESCRIPTION
C----------------------------------------------------------------------------------------
     {{ coord_factor }}  {{ thickness_factor }}  {{ hyd_cond_factor }}    / FX  FThickness  FHydCond
     {{ time_unit | pad_right(22) }}/ TUNITK
{% if n_parametric_grids == 0 %}
C----------------------------------------------------------------------------------------
C   ELEMID  [ThickMax  Porosity  Lambda  HydCond  KMethod] x NLayers
C----------------------------------------------------------------------------------------
{% for elem in element_data %}
    {{ elem.element_id }}{% for layer in elem.layers %}  {{ layer.thickness_max | fortran_float(10, 4) }}  {{ layer.total_porosity | fortran_float(8, 4) }}  {{ layer.lambda_param | fortran_float(8, 4) }}  {{ layer.hyd_cond | fortran_float(10, 6) }}  {{ layer.kunsat_method }}{% endfor %}

{% endfor %}
{% endif %}
C*******************************************************************************
C                       Initial Soil Moisture
C
C----------------------------------------------------------------------------------------
C   ELEMID  SoilM_L1  SoilM_L2  ...
C----------------------------------------------------------------------------------------
{% if uniform_moisture is not none %}
    0{% for m in uniform_moisture %}  {{ m | fortran_float(10, 4) }}{% endfor %}

{% else %}
{% for ic in initial_conditions %}
    {{ ic.element_id }}{% for m in ic.moisture %}  {{ m | fortran_float(10, 4) }}{% endfor %}

{% endfor %}
{% endif %}
{% endif %}
